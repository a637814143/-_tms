# 项目改进建议

以下建议围绕标签关键字配置化、训练调参与评估强化、以及特征提取的可扩展性与监控三大方向，帮助你在保持现有流程的同时逐步提升系统鲁棒性与可维护性。

## 1. 标签关键字配置化与可视化管理
- **问题现状**：`LABEL_KEYWORDS`、`POSITIVE_TOKENS` 等常量目前硬编码在 `unsupervised_train` 模块中，扩展或调整需要改动代码并重新发布。【F:src/functions/unsupervised_train.py†L19-L74】
- **改进建议**：
  - 将关键字提取到独立的 YAML/JSON 配置文件，支持按项目定制。
  - 在界面中新增“标签字典”管理入口，可视化增删关键字并一键下发到训练流程。【F:src/ui/ui_main.py†L9-L56】
  - 配置文件加载时加入校验和版本号，避免格式错误导致训练异常。
- **预期收益**：降低维护成本，缩短适配新日志字段或业务术语的周期，同时减少误改代码的风险。

## 2. 强化训练调参与评估反馈
- **问题现状**：当前训练流程固定使用单组 IsolationForest 超参数，评估仅输出整体准确率，缺少对阈值、样本不平衡等因素的探索。【F:src/functions/unsupervised_train.py†L232-L311】
- **改进建议**：
  - 引入网格搜索或贝叶斯优化，对 `contamination`、`n_estimators` 等关键超参数做自动调参。
  - 预留验证集或交叉验证流程，记录 ROC/PR 曲线、召回率、精确率等指标。
  - 在界面提供训练报告下载或可视化，帮助快速比较不同配置的表现。
- **预期收益**：更系统地评估模型质量，及时发现过拟合或阈值不合适的问题，从而稳步提升准确率。

## 3. 提升特征提取的可扩展性与性能监控
- **问题现状**：`feature_extractor` 以流量统计为主，缺乏 TLS 指纹、DNS 字段等高价值特征的扩展点，也缺少对处理耗时与异常的监控。【F:src/functions/feature_extractor.py†L70-L176】
- **改进建议**：
  - 将 `FlowAccumulator.to_row` 拆分为插件式接口，按协议/特征模块化实现，便于增删改。
  - 为多线程提取流程增加 metrics 采集，如每分钟处理包数、耗时分布、异常计数。
  - 当处理超时或性能下降时，配合 UI 发出告警提示并提供调试信息。
- **预期收益**：特征层扩展更灵活，性能瓶颈更易定位，保障实时性需求。
